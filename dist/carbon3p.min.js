/*! carbon 11-06-2016 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.carbon3p=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports.ThirdPartyEmbed=a("./thirdPartyEmbed")},{"./thirdPartyEmbed":2}],2:[function(require,module,exports){"use strict";var Utils=require("../utils"),ThirdPartyEmbed=function(){this.embedWidth=0,this.embedHeight=0,this.embedType="rich",this.origin=null,this.dom=document.getElementById("outer-container"),this.container=document.createElement("div"),this.container.className="container",this.dom.appendChild(this.container)};module.exports=ThirdPartyEmbed,ThirdPartyEmbed.prototype.init=function(){var a=this.parseFragment(location.hash);this.origin=a.origin,this.embed(a.oEmbedUrl,a.width)},ThirdPartyEmbed.prototype.triggerDimensions=function(a,b,c){this.embedWidth=parseFloat(a),this.embedHeight=parseFloat(b),this.sendMessage("embed-size",{width:a,height:b},c)},ThirdPartyEmbed.prototype.embed=function(a,b){this.dom.style.width=b+"px",Utils.ajax(a,function(a){if(this.embedType=a.type,"rich"===this.embedType&&Utils.addResizeListener(this.dom,function(){var a=getComputedStyle(this.dom);this.triggerDimensions(a.width,a.height,this.origin),this.dom.style.width="auto"}.bind(this)),this.container.innerHTML=a.html,this.executeScriptsIn_(this.container),"video"===this.embedType||"image"===this.embedType){var b=this.dom.getElementsByTagName("iframe")[0];b&&(this.embedWidth=parseFloat(b.width),this.embedHeight=parseFloat(b.height)),this.embedWidth&&this.embedHeight&&(this.triggerDimensions(this.embedWidth,this.embedHeight,this.origin),this.container.style.paddingBottom=this.embedHeight/this.embedWidth*100+"%")}this.dom.classList.add(a.type),this.dom.classList.add(a.provider_name)}.bind(this),!0)},ThirdPartyEmbed.prototype.executeScriptsIn_=function(element){for(var scripts=element.getElementsByTagName("script"),i=0;i<scripts.length;i++)if(scripts[i].getAttribute("src")){var script=document.createElement("script");script.src=scripts[i].getAttribute("src"),scripts[i].parentNode?scripts[i].parentNode.replaceChild(script,scripts[i]):document.body.appendChild(script)}else eval(Utils.getTextFromElement(scripts[i]))},ThirdPartyEmbed.prototype.sendMessage=function(a,b,c){if(window.parent!==window){var d=b||{};d.type=a,window.parent.postMessage(d,c)}},ThirdPartyEmbed.prototype.parseFragment=function(a){var b=a.substr(1);return 0!==b.indexOf("{%22")&&0!==b.indexOf("%7B%22")||(b=decodeURIComponent(b)),b?JSON.parse(b):{}}},{"../utils":3}],3:[function(a,b,c){"use strict";var d={};d.arrays={},b.exports=d,d.GLOBAL_REFERENCE={},d.extend=function(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d},d.isEmpty=function(a){if(null===a||0===a.length)return!0;if(a.length>0)return!1;for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0},d.arrays.extend=function(a,b){for(var c in b)a.push(b[c]);return a},d.setReference=function(a,b){d.GLOBAL_REFERENCE[a]=b},d.getReference=function(a){return d.GLOBAL_REFERENCE[a]},d.getUID=function(a){for(var b=a||8,c=[],d="abcdefghijklmnopqrstuvwxyz0123456789",e=0;b>e;e++)c.push(d.charAt(Math.floor(Math.random()*d.length)));return c.join("")},d.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}},d.willTypeCharacter=function(a){var b=[16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,91,92,93,112,113,114,115,116,117,118,119,120,121,122,123,144,145];return-1===b.indexOf(a.keyCode)&&!a.ctrlKey&&!a.metaKey},d.isUndo=function(a){return!(!a.ctrlKey&&!a.metaKey||90!==a.keyCode||a.shiftKey)},d.isRedo=function(a){return!(!a.ctrlKey&&!a.metaKey||!(89===a.keyCode||a.shiftKey&&90===a.keyCode))},d.isSelectAll=function(a){return!(!a.ctrlKey&&!a.metaKey||65!==a.keyCode||a.shiftKey)},d.isMobile=function(){return!!/Mobi|iPhone|iPod|iPad|BlackBerry|Android/i.test(navigator.userAgent)},d.isFirefox=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},d.getTextProperty=function(a){var b;return b=a.nodeType===Node.TEXT_NODE?"data":void 0!==a.textContent?"textContent":"innerText"},d.setTextForElement=function(a,b){a[d.getTextProperty(a)]=b},d.getTextFromElement=function(a){return a[d.getTextProperty(a)]},d.clone=function(a){var b;if(null===a||"object"!=typeof a)return a;if(a instanceof Date)return b=new Date,b.setTime(a.getTime()),b;if(a instanceof Array){b=[];for(var c=0,e=a.length;e>c;c++)b[c]=d.clone(a[c]);return b}if(a instanceof Object){b={};for(var f in a)a.hasOwnProperty(f)&&(b[f]=d.clone(a[f]));return b}throw new Error("Unable to copy object! Its type is not supported.")},d.jsonp=function(a,b){var c="jsonp_callback_"+Math.round(1e5*Math.random());window[c]=function(a){delete window[c],document.body.removeChild(d),b(a)};var d=document.createElement("script");a.indexOf("?")>=0?d.src=a+"&callback="+c:d.src=a+"?callback="+c,document.body.appendChild(d)},d.ajax=function(a,b,c){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status){var f=JSON.parse(e.responseText);b(f)}else c&&d.jsonp(a,b)},e.open("GET",a,!0),e.send()},d.listen=function(a,b,c){window.addEventListener("message",function(d){d.source==a.contentWindow&&d.data.type==b&&c(d.data)}.bind(this))},d.CustomEventTarget=function(){this._init()},d.CustomEventTarget.prototype._init=function(){this._registrations={}},d.CustomEventTarget.prototype._getListeners=function(a,b){var c=(b?"1":"0")+a;return c in this._registrations||(this._registrations[c]=[]),this._registrations[c]},d.CustomEventTarget.prototype.addEventListener=function(a,b,c){var d=this._getListeners(a,c),e=d.indexOf(b);-1===e&&d.push(b)},d.CustomEventTarget.prototype.removeEventListener=function(a,b,c){var d=this._getListeners(a,c),e=d.indexOf(b);-1!==e&&d.splice(e,1)},d.CustomEventTarget.prototype.clearEventListeners=function(){this._registrations={}},d.CustomEventTarget.prototype.dispatchEvent=function(a){for(var b=this._getListeners(a.type,!1).slice(),c=0;c<b.length;c++)b[c].call(this,a);return!a.defaultPrevented},function(){function a(a){var b=a.target||a.srcElement;b.__resizeRAF__&&h(b.__resizeRAF__),b.__resizeRAF__=g(function(){var c=b.__resizeTrigger__;c.__resizeListeners__.forEach(function(b){b.call(c,a)})})}function b(b){b.target.contentDocument.defaultView.__resizeTrigger__=b.target.__resizeElement__,b.target.contentDocument.defaultView.addEventListener("resize",a)}var c=document.attachEvent,e=navigator.userAgent.match(/Trident/),f=function(a){return window.setTimeout(a,20)},g=function(){var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||f;return function(b){return a(b)}}(),h=function(){var a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(b){return a(b)}}();d.addResizeListener=function(d,f){if(!d.__resizeListeners__)if(d.__resizeListeners__=[],c)d.__resizeTrigger__=d,d.attachEvent("onresize",a);else{"static"==getComputedStyle(d).position&&(d.style.position="relative");var g=d.__resizeTrigger__=document.createElement("object");g.setAttribute("style","display: block; position: absolute; top: 0;left: 0; height: 100%; width: 100%; overflow: hidden;pointer-events: none; z-index: -1;"),g.__resizeElement__=d,g.onload=b,g.type="text/html",e&&d.appendChild(g),g.data="about:blank",e||d.appendChild(g)}d.__resizeListeners__.push(f)},d.removeResizeListener=function(b,d){if(b.__resizeListeners__.splice(b.__resizeListeners__.indexOf(d),1),!b.__resizeListeners__.length)if(c)b.detachEvent("onresize",a);else{var e=b.__resizeTrigger__.contentDocument;e.defaultView.removeEventListener("resize",a),b.__resizeTrigger__=!b.removeChild(b.__resizeTrigger__)}}}()},{}]},{},[1])(1)});